<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Overnet</title>
  <style>
    body{margin:0;background:#0b0f17;color:#e7ecf3;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .card{max-width:720px;margin:6vh auto;padding:24px;background:#0e1522;border:1px solid #1f2a3a;border-radius:16px}
    h1{margin:0 0 8px 0;text-align:center}
    .row{display:flex;gap:12px;margin:10px 0}
    input,button{padding:10px 12px;border-radius:8px;border:1px solid #27384f;background:#0b1220;color:#e7ecf3}
    button{background:#1a6fff;border-color:#1a6fff;cursor:pointer}
    code{background:#0b1220;padding:2px 6px;border-radius:6px;border:1px solid #1f2a3a}
    .muted{opacity:.7;font-size:.9em}
  </style>
</head>
<body>
  <div class="card">
    <h1>Overnet</h1>
    <p class="muted" style="text-align:center">Una sola conexión. Todas las inteligencias.</p>

    <h3>Endpoints básicos</h3>
    <div class="row"><code>GET /health</code> → <code>{"ok": true}</code></div>
    <div class="row"><code>POST /auth/signup</code> → devuelve <code>API key</code></div>
    <div class="row"><code>POST /auth/login</code> → devuelve <code>API key</code></div>
    <div class="row"><code>POST /echo</code> (con <code>X-API-Key</code>)</div>

    <h3>Crear cuenta</h3>
    <div class="row"><input id="su_email" placeholder="email"/><input id="su_pass" placeholder="password" type="password"/><button onclick="signup()">Signup</button></div>
    <div class="muted">Tu API key: <span id="api_key">—</span></div>

    <h3>Login</h3>
    <div class="row"><input id="li_email" placeholder="email"/><input id="li_pass" placeholder="password" type="password"/><button onclick="login()">Login</button></div>

    <h3>Probar /echo (protegido)</h3>
    <div class="row"><input id="echo_msg" placeholder="hola"/><button onclick="echo()">Enviar</button></div>
  </div>

<script>
async function signup(){
  const email = document.getElementById('su_email').value;
  const password = document.getElementById('su_pass').value;
  const r = await fetch('/auth/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
  const j = await r.json(); document.getElementById('api_key').textContent = j.api_key || JSON.stringify(j);
}
async function login(){
  const email = document.getElementById('li_email').value;
  const password = document.getElementById('li_pass').value;
  const r = await fetch('/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
  const j = await r.json(); document.getElementById('api_key').textContent = j.api_key || JSON.stringify(j);
}
async function echo(){
  const key = document.getElementById('api_key').textContent.trim();
  const msg = document.getElementById('echo_msg').value || 'hola';
  const r = await fetch('/echo',{method:'POST',headers:{'Content-Type':'application/json','X-API-Key':key},body:JSON.stringify({msg})});
  alert(await r.text());
}
</script>
</body>
</html>
